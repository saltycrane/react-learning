webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),a=r(o),u=n(153),i=r(u),c=n(154),l=r(c);n(417),i["default"].render(a["default"].createElement(l["default"],null),root)},154:function(e,t,n){"use strict";e.exports=n(155)},155:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(156),s=n(174),m=r(s),d=n(413),p=r(d),b=(0,p["default"])(),E=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement(f.Provider,{store:b},l["default"].createElement(m["default"],null))}}]),t}(c.Component);t["default"]=E},174:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(175),s=n(221),m=r(s),d=n(405),p=r(d),b=n(410),E=r(b),v=n(411),y=r(v),h=n(412),_=r(h),g=n(224),O=r(g),j=l["default"].createClass({displayName:"Tab",mixins:[f.History],render:function(){var e=this.history.isActive(this.props.to,this.props.query),t=e?"active":"";return l["default"].createElement("li",{className:t},l["default"].createElement(f.Link,this.props))}}),C=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement("nav",{className:"navbar navbar-default"},l["default"].createElement("div",{className:"container-fluid"},l["default"].createElement("div",{className:"navbar-header"},l["default"].createElement("div",{className:"navbar-brand"},"H")),l["default"].createElement("ul",{className:"nav navbar-nav"},l["default"].createElement(j,{to:"/comments"},"Comments"),l["default"].createElement(j,{to:"/last"},"Last Comment"),l["default"].createElement(j,{to:"/about"},"About"))))}}]),t}(c.Component),w=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement("div",null,l["default"].createElement(C,null),l["default"].createElement("div",{className:"container"},l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-md-12"},this.props.children))))}}]),t}(c.Component),T=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement(f.Router,{history:O["default"]},l["default"].createElement(f.Route,{path:"/",component:w},l["default"].createElement(f.Route,{path:"about",component:_["default"]}),l["default"].createElement(f.Route,{path:"comments/:id/edit",component:E["default"]}),l["default"].createElement(f.Route,{path:"comments/:id",component:m["default"]}),l["default"].createElement(f.Route,{path:"comments",component:p["default"]}),l["default"].createElement(f.Route,{path:"last",component:y["default"]}),l["default"].createElement(f.IndexRedirect,{to:"comments"})))}}]),t}(c.Component);t["default"]=T},221:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(222),s=r(f),m=n(302),d=r(m),p=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.actions;e.fetchComments()}},{key:"render",value:function(){var e=this.props,t=e.params.id,n=e.actions,r=e.comments,o=e.images,a=r.find(function(e){return e.objectId===t}),u=null;return a&&(u=l["default"].createElement(d["default"],{commentObj:a,images:o,actions:n,isDetailView:!0})),l["default"].createElement("div",{className:"commentBox"},l["default"].createElement("h3",null,"Comment ",t),u)}}]),t}(c.Component);t["default"]=(0,s["default"])(p)},222:function(e,t,n){"use strict";function r(e){return{isFetching:e.comments.isFetching,lastUpdated:e.comments.lastUpdated,comments:e.comments.items,images:e.images.items,location:e.location}}function o(e){return{actions:(0,u.bindActionCreators)({fetchComments:i.fetchComments,deleteComment:i.deleteComment,saveComment:i.saveComment,editComment:i.editComment,cancelEditComment:i.cancelEditComment,saveImage:i.saveImage,deleteSavedImage:i.deleteSavedImage,deleteUnsavedImage:i.deleteUnsavedImage,getLocation:i.getLocation,setLocationFromUserInput:i.setLocationFromUserInput,setLocationFromDetected:i.setLocationFromDetected,undoSetLocation:i.undoSetLocation},e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(156),u=n(163),i=n(223);t["default"]=(0,a.connect)(r,o)},223:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(){return{type:P}}function u(e){return{type:A,comments:e,receivedAt:Date.now()}}function i(e){return{type:k,comment:e}}function c(e){return{type:L,comment:e}}function l(e){return{type:D,id:e}}function f(e){return{type:R,image:e}}function s(e,t){return{type:x,id:e,comment:t}}function m(e){return{type:U,id:e}}function d(){return function(e){e(a()),S.getComments(function(t){return e(u(t))})}}function p(e){var t=e.comments;return t.isFetching?!1:t.items.length>0?!1:!0}function b(){return{type:V}}function E(e){return{type:F,lat:e.latitude,lon:e.longitude}}function v(){return function(e,t){return p(t())?e(d()):Promise.resolve()}}function y(e){return function(t){t(i(e)),S.saveComment(e,function(e){return t(c(e))})}}function h(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return function(n){n(l(e)),t&&M["default"].goBack(),S.deleteComment(e)}}function _(e){return function(t){S.saveImage(e,function(e){return t(f(e))})}}function g(e,t){var n=t.images.filter(function(t){return t.objectId!==e}),r=Object.assign({},t,{images:n});return function(t){t(s(e,r)),S.deleteImage(e),S.saveComment(r)}}function O(e){return function(t){t(m(e)),S.deleteImage(e)}}function j(e){return{type:G,locationText:e}}function C(){return T(),{type:B}}function w(){return{type:Y}}function T(){return function(e){e(b()),navigator.geolocation.getCurrentPosition(function(t){e(E(t.coords))},function(e){console.error("ERROR("+e.code+"): "+e.message)},{enableHighAccuracy:!0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UNDO_SET_LOCATION=t.SET_LOCATION_FROM_DETECTED=t.SET_LOCATION_FROM_USER_INPUT=t.GET_LOCATION_SUCCESS=t.GET_LOCATION=t.DELETE_UNSAVED_IMAGE=t.DELETE_SAVED_IMAGE=t.RECEIVE_IMAGE=t.SAVE_IMAGE=t.DELETE_COMMENT=t.RECEIVE_COMMENT=t.SAVE_COMMENT=t.RECEIVE_COMMENTS=t.REQUEST_COMMENTS=void 0,t.fetchComments=v,t.saveComment=y,t.deleteComment=h,t.saveImage=_,t.deleteSavedImage=g,t.deleteUnsavedImage=O,t.setLocationFromUserInput=j,t.setLocationFromDetected=C,t.undoSetLocation=w,t.getLocation=T;var I=n(224),M=o(I),N=n(225),S=r(N),P=t.REQUEST_COMMENTS="REQUEST_COMMENTS",A=t.RECEIVE_COMMENTS="RECEIVE_COMMENTS",k=t.SAVE_COMMENT="SAVE_COMMENT",L=t.RECEIVE_COMMENT="RECEIVE_COMMENT",D=t.DELETE_COMMENT="DELETE_COMMENT",R=(t.SAVE_IMAGE="SAVE_IMAGE",t.RECEIVE_IMAGE="RECEIVE_IMAGE"),x=t.DELETE_SAVED_IMAGE="DELETE_SAVED_IMAGE",U=t.DELETE_UNSAVED_IMAGE="DELETE_UNSAVED_IMAGE",V=t.GET_LOCATION="GET_LOCATION",F=t.GET_LOCATION_SUCCESS="GET_LOCATION_SUCCESS",G=t.SET_LOCATION_FROM_USER_INPUT="SET_LOCATION_FROM_USER_INPUT",B=t.SET_LOCATION_FROM_DETECTED="SET_LOCATION_FROM_DETECTED",Y=t.UNDO_SET_LOCATION="UNDO_SET_LOCATION"},224:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(178),a=r(o);t["default"]=(0,a["default"])()},225:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=new s["default"].Query(m);t.include("images"),t.find().done(function(t){var n=t.map(function(e){return e.toJSON()});e(n)}).fail(function(e){console.error("Error: "+e.code+" "+e.meessage)})}function a(e,t){var n=new m,r=e.images.filter(function(e){return!e.commentId});n.save(e).done(function(e){var n=e.id;r.forEach(function(e){c(e,n)}),t&&t(e.toJSON())})}function u(e){var t=new m;t.id=e,t.destroy()}function i(e,t){var n=new s["default"].File(e.name,e);n.save().done(function(){var e=new d;e.save({file:n}).done(function(e){t(e.toJSON())})})}function c(e,t){var n=new d;e.commentId=t,n.save(e)}function l(e){var t=new d;t.id=e,t.destroy()}Object.defineProperty(t,"__esModule",{value:!0}),t.Comment=void 0,t.getComments=o,t.saveComment=a,t.deleteComment=u,t.saveImage=i,t.linkImageToComment=c,t.deleteImage=l;var f=n(226),s=r(f);s["default"].initialize("rdOxoEPZqN4I8RvIkmcWmPK0xcaR7EfrIDj0WFYh","EFEekvA7WVsPTN0SGiNYsHWvaiUiSdwWiJoZ6pMU");var m=t.Comment=s["default"].Object.extend("Comment"),d=s["default"].Object.extend("Image")},302:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),f=o(l),s=n(175),m=n(303),d=o(m),p=n(304),b=o(p),E=n(305),v=r(E),y=function(e){function t(){return a(this,t),u(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),c(t,[{key:"_rawMarkup",value:function(){var e=this.props.commentObj,t=null;return e.text&&(t=(0,d["default"])(e.text.toString(),{sanitize:!0})),{__html:t}}},{key:"_renderImages",value:function(){var e=this.props.commentObj,t=null;return e.images&&(t=e.images.map(function(e){return f["default"].createElement("a",{href:e.file.url,key:e.objectId},f["default"].createElement("img",{src:e.file.url,height:"150px"}))})),t}},{key:"render",value:function(){var e=this.props,t=e.commentObj,n=e.actions,r=e.isDetailView,o=void 0===r?!1:r,a=null;return o||(a=f["default"].createElement(s.Link,{className:"btn btn-default",to:"/comments/"+t.objectId},"View")),f["default"].createElement("div",{className:"comment well"},f["default"].createElement("div",{className:"clearfix"},f["default"].createElement("h5",null,t.author," ",f["default"].createElement("small",null,"created ",v.formatDate(t.createdAt)," |  updated ",v.formatDate(t.updatedAt))),f["default"].createElement("div",{className:"pull-right"},f["default"].createElement(b["default"],{location:t.location})),f["default"].createElement("span",{dangerouslySetInnerHTML:this._rawMarkup()}),f["default"].createElement("div",{className:"margin-md-bottom"},this._renderImages()),f["default"].createElement("div",null,f["default"].createElement("button",{className:"btn btn-default margin-md-right",onClick:function(){return n.deleteComment(t.objectId,o)}},"Delete"),f["default"].createElement(s.Link,{className:"btn btn-default margin-md-right",to:"/comments/"+t.objectId+"/edit"},"Edit"),a)))}}]),t}(l.Component);t["default"]=y},304:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props.location,t=null;if(e){var n="http://maps.googleapis.com/maps/api/staticmap?size=275x275&zoom=12&markers=color:red|"+e;t=l["default"].createElement("div",null,l["default"].createElement("a",{href:"https://www.google.com/maps/place/"+e},l["default"].createElement("img",{src:n,className:"img-responsive"}),l["default"].createElement("div",{className:"comment-metadata"},"Location: ",e)))}return t}}]),t}(c.Component);t["default"]=f},305:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return(0,u["default"])(e).format("YYYY-MM-DD h:mm a")}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=o;var a=n(306),u=r(a)},405:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(222),s=r(f),m=n(406),d=r(m),p=n(409),b=r(p),E=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.actions;e.fetchComments()}},{key:"render",value:function(){var e=this.props,t=e.comments,n=e.images,r=e.location,o=e.actions;return l["default"].createElement("div",{className:"commentBox"},l["default"].createElement("h3",null,"Comments"),l["default"].createElement(b["default"],{data:t,actions:o}),l["default"].createElement("div",null,l["default"].createElement("h4",null,"Add a comment"),l["default"].createElement("div",{className:"well"},l["default"].createElement(d["default"],{commentObj:{},images:n,location:r,actions:o}))))}}]),t}(c.Component);t["default"]=(0,s["default"])(E)},406:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t,n){var r=[].concat(i(e),i(t)),o=r.map(function(e){return e[n]}),a=[].concat(i(new Set(o)));return a.map(function(e){return r.find(function(t){return t[n]===e})})}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var f=n(1),s=r(f),m=n(407),d=r(m),p=n(408),b=r(p),E=n(224),v=r(E),y=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n._handleSave=n._handleSave.bind(n),n}return u(t,e),l(t,[{key:"_handleSave",value:function(e){e.preventDefault();var t=this.props,n=t.commentObj,r=t.images,o=t.actions,a=t.isEditView,u=void 0===a?!1:a,i=this._authorInput.value.trim(),l=this._textInput.value.trim(),f=this._locationForm.getValue(),s=void 0;s=n.images?c(n.images,r,"objectId"):r;var m=Object.assign({},n,{author:i,text:l,location:f,images:s});l&&i&&(o.saveComment(m),this._authorInput.value="",this._textInput.value="",u&&v["default"].goBack())}},{key:"render",value:function(){var e=this,t=this.props,n=t.commentObj,r=t.images,o=t.location,a=t.actions,u=t.isEditView,i=void 0===u?!1:u,c=null;return i&&(c=s["default"].createElement("span",{className:"btn btn-default margin-md-right",onClick:v["default"].goBack},"Cancel")),s["default"].createElement("form",{onSubmit:this._handleSave},s["default"].createElement("div",{className:"form-group"},s["default"].createElement("label",null,"Name"),s["default"].createElement("input",{className:"form-control",type:"text",placeholder:"Your name",defaultValue:n.author,ref:function(t){return e._authorInput=t}})),s["default"].createElement("div",{className:"form-group"},s["default"].createElement("label",null,"Comment"),s["default"].createElement("textarea",{className:"form-control",rows:"5",type:"text",placeholder:"Say something...",defaultValue:n.text,ref:function(t){return e._textInput=t}})),s["default"].createElement(b["default"],{location:o,actions:a,initialLocationText:n.location,ref:function(t){return e._locationForm=t}}),s["default"].createElement("div",{className:"margin-md-bottom"},s["default"].createElement(d["default"],{commentObj:n,images:r,actions:a})),c,s["default"].createElement("button",{className:"btn btn-primary",type:"submit"},"Save"))}}]),t}(f.Component);t["default"]=y},407:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.onDelete;return l["default"].createElement("div",{className:"img-container"},l["default"].createElement("img",{src:t.file.url,height:"150px"}),l["default"].createElement("span",{className:"btn-delete btn btn-default",onClick:n},l["default"].createElement("i",{className:"fa fa-times"})))}}]),t}(c.Component),s=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n._handleFileChange=n._handleFileChange.bind(n),n}return u(t,e),i(t,[{key:"_handleFileChange",value:function(e){var t=this.props.actions,n=e.target.files[0];t.saveImage(n)}},{key:"_renderFileInput",value:function(){var e=this;return l["default"].createElement("div",{className:"form-group"},l["default"].createElement("label",null,"Add Image"),l["default"].createElement("input",{className:"form-control",type:"file",onChange:this._handleFileChange,ref:function(t){return e._fileInput=t}}))}},{key:"_renderImages",value:function(){var e=this.props,t=e.commentObj,n=e.images,r=e.actions,o=null,a=null;return t.images&&(o=t.images.map(function(e){return l["default"].createElement(f,{key:e.objectId,image:e,onDelete:function(){return r.deleteSavedImage(e.objectId,t)}})})),n&&(a=n.map(function(e){return l["default"].createElement(f,{key:e.objectId,image:e,onDelete:function(){return r.deleteUnsavedImage(e.objectId)}})})),l["default"].createElement("div",null,o,a)}},{key:"render",value:function(){return l["default"].createElement("div",null,this._renderFileInput(),this._renderImages())}}]),t}(c.Component);t["default"]=s},408:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(304),s=r(f),m=function(e){function t(e){o(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n._handleLocationChange=n._handleLocationChange.bind(n),n}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialLocationText,n=e.actions;n.setLocationFromUserInput(t),n.getLocation()}},{key:"_handleLocationChange",value:function(e){var t=this.props.actions;t.setLocationFromUserInput(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.location.text,r=t.actions;return l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-md-6"},l["default"].createElement("label",null,"Location"),l["default"].createElement("div",{className:"margin-md-bottom"},l["default"].createElement("div",{className:"form-group"},l["default"].createElement("input",{className:"form-control margin-sm-bottom",type:"text",value:n,onChange:this._handleLocationChange,ref:function(t){return e._locationInput=t}}),l["default"].createElement("button",{className:"btn btn-default margin-sm-right",type:"button",onClick:r.setLocationFromDetected},"Get Location"),l["default"].createElement("button",{className:"btn btn-default",type:"button",onClick:r.undoSetLocation},"Undo")))),l["default"].createElement("div",{className:"col-md-6"},l["default"].createElement(s["default"],{location:n})))}},{key:"getValue",value:function(){return this._locationInput.value.trim()}}]),t}(c.Component);t["default"]=m},409:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(302),s=r(f),m=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,r=t.map(function(e){return l["default"].createElement(s["default"],{key:e.objectId,commentObj:e,actions:n})});return l["default"].createElement("div",{className:"commentList"},r)}}]),t}(c.Component);t["default"]=m},410:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),f=o(l),s=n(222),m=o(s),d=n(406),p=o(d),b=n(305),E=r(b),v=function(e){function t(){return a(this,t),u(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props.actions;e.fetchComments()}},{key:"render",value:function(){var e=this.props,t=e.params.id,n=e.actions,r=e.comments,o=e.images,a=e.location,u=r.find(function(e){return e.objectId===t}),i=null;return u&&(i=f["default"].createElement("div",{className:"well"},f["default"].createElement("div",{className:"comment-metadata margin-md-bottom"},"created ",E.formatDate(u.createdAt)," |  updated ",E.formatDate(u.updatedAt)),f["default"].createElement("div",{className:"margin-md-bottom"},f["default"].createElement(p["default"],{commentObj:u,images:o,location:a,actions:n,isEditView:!0})))),f["default"].createElement("div",{className:"commentBox"},f["default"].createElement("h3",null,"Editing Comment ",t),i)}}]),t}(l.Component);t["default"]=(0,m["default"])(v)},411:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=n(222),s=r(f),m=n(302),d=r(m),p=n(406),b=r(p),E=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.actions;e.fetchComments(),e.getLocation()}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.comments,r=e.images,o=e.location,a=n[n.length-1],u=null;return a&&(u=l["default"].createElement("div",null,l["default"].createElement("h3",null,"Comment ",a.objectId),l["default"].createElement(d["default"],{commentObj:a,images:r,actions:t,isDetailView:!1}),l["default"].createElement("h4",null,"Add a comment"),l["default"].createElement("div",{className:"well"},l["default"].createElement(b["default"],{commentObj:{},images:r,location:o,actions:t})))),l["default"].createElement("div",{className:"commentBox"},u)}}]),t}(c.Component);t["default"]=(0,s["default"])(E)},412:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),f=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement("div",null,l["default"].createElement("h3",null,"About"),l["default"].createElement("p",null,"Github Code: ",l["default"].createElement("a",{href:"https://github.com/saltycrane/react-learning/tree/master/9.2-my-comments"},"https://github.com/saltycrane/react-learning/tree/master/9.2-my-comments")))}}]),t}(c.Component);t["default"]=f},413:function(e,t,n){"use strict";e.exports=n(414)},414:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return f(l["default"],e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(163),u=n(415),i=r(u),c=n(416),l=r(c),f=(0,a.compose)((0,a.applyMiddleware)(i["default"]))(a.createStore)},416:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return e.map(function(e){return e.objectId===t?Object.assign({},e,n):e})}function a(){var e=arguments.length<=0||void 0===arguments[0]?{isFetching:!1,didInvalidate:!1,items:[]}:arguments[0],t=arguments[1],n=void 0,a=void 0,u=void 0;switch(t.type){case l.REQUEST_COMMENTS:return Object.assign({},e,{isFetching:!0,didInvalidate:!1});case l.RECEIVE_COMMENTS:return Object.assign({},e,{isFetching:!1,didInvalidate:!1,items:t.comments,lastUpdated:t.receivedAt});case l.RECEIVE_COMMENT:return u=t.comment,n=!e.items.some(function(e){return e.objectId===u.objectId}),a=n?[].concat(r(e.items),[u]):o(e.items,u.objectId,u),Object.assign({},e,{items:a});case l.DELETE_COMMENT:return Object.assign({},e,{items:e.items.filter(function(e){return e.objectId!==t.id})});case l.DELETE_SAVED_IMAGE:return Object.assign({},e,{items:o(e.items,t.comment.objectId,t.comment)});default:return e}}function u(){var e=arguments.length<=0||void 0===arguments[0]?{items:[]}:arguments[0],t=arguments[1],n=void 0;switch(t.type){case l.RECEIVE_IMAGE:return n=[].concat(r(e.items),[t.image]),Object.assign({},e,{items:n});case l.RECEIVE_COMMENT:return Object.assign({},e,{items:[]});case l.DELETE_UNSAVED_IMAGE:return Object.assign({},e,{items:e.items.filter(function(e){return e.objectId!==t.id})});default:return e}}function i(){var e=arguments.length<=0||void 0===arguments[0]?{lat:null,lon:null,text:null,prevText:null}:arguments[0],t=arguments[1],n=void 0;switch(t.type){case l.GET_LOCATION_SUCCESS:return Object.assign({},e,{lat:t.lat,lon:t.lon});case l.SET_LOCATION_FROM_USER_INPUT:return Object.assign({},e,{text:t.locationText});case l.SET_LOCATION_FROM_DETECTED:return n=e.lat+","+e.lon,Object.assign({},e,{text:n,prevText:e.text});case l.UNDO_SET_LOCATION:return Object.assign({},e,{text:e.prevText});default:return e}}function c(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];return{comments:a(e.comments,t),images:u(e.images,t),location:i(e.location,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c;var l=n(223)},417:function(e,t){}});
//# sourceMappingURL=app.87cc62a74b36b9b75661.js.map?